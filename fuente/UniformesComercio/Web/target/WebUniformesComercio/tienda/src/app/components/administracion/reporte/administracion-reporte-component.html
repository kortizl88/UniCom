<div class="admReporte">
    <a class="btnTglFil" [ngClass]="{'activo': toggleFil}" (click)="toggleFiltros()"></a>
    <div class="filtros" *ngIf="toggleFil">
        <div class="seccFil">
            <div class="titSecc">
                <b>Fecha Inicial</b>
            </div>
            <md-input-container>
                <input mdInput [mdDatepicker]="dpIni" [(ngModel)]="finicio" placeholder="Fecha inicial">
                <button mdSuffix [mdDatepickerToggle]="dpIni"></button>
            </md-input-container>
            <md-datepicker #dpIni></md-datepicker>
        </div>
        <div class="seccFil">
            <div class="titSecc">
                <b>Fecha Final</b>
            </div>
            <md-input-container>
                <input mdInput [mdDatepicker]="dpFin" [(ngModel)]="ffin" placeholder="Fecha final">
                <button mdSuffix [mdDatepickerToggle]="dpFin"></button>
            </md-input-container>
            <md-datepicker #dpFin></md-datepicker>
        </div>
        <div class="seccFil contCargRep">
            <div class="titSecc">
                <b>Carga Semestral</b>
            </div>
            <md-checkbox [ngClass]="'chkPol'" color="primary" [(ngModel)]="filCarga" (ngModelChange)="seleccionarCargaModal()">
                <span>Buscar Carga</span>
            </md-checkbox>
            <div *ngIf="cargas && filCarga">
                <div class="cargasSel" *ngFor="let carga of cargas">&#9679;&nbsp;&nbsp;{{carga.titulo}}</div>
            </div>
        </div>

        <div class="seccFil contEst">
            <div class="titSecc">
                <b>Estatus</b>
            </div>
            <div class="estChk" *ngFor="let est of estatus">
                <md-checkbox [ngClass]="'chkPol'" color="primary" [(ngModel)]="est.sel" (ngModelChange)="estSeleccion(est)">
                    <span>{{est.estatus}}</span>
                </md-checkbox>
            </div>
        </div>
        <div class="seccFil contTdaB">
            <div class="titSecc">
                <b>Tienda</b>
            </div>
            <form #f="ngForm">
                <md-input-container class="inpBTda">
                    <input mdInput placeholder="Escriba la sucursal (Número o Nombre)" [mdAutocomplete]="tdAuto" name="tienda" #tienda="ngModel"
                        [(ngModel)]="consTda" (ngModelChange)="tiendasFil = filtroTiendas(consTda)">
                </md-input-container>

                <md-autocomplete #tdAuto="mdAutocomplete" [displayWith]="mostrarNombreTda.bind(this)">
                    <md-option *ngFor="let tienda of tiendasFil" [value]="tienda">
                        <span>{{ tienda.sucursal }} - {{ tienda.nombreTienda }}</span>
                    </md-option>
                </md-autocomplete>
            </form>
        </div>
        <div class="seccFil contEmpB">
            <div class="titSecc">
                <b>Número de Empleado</b>
            </div>
            <md-input-container class="inpBEmp">
                <input mdInput placeholder="Escriba el número de empleado" [(ngModel)]="this.emp" />
            </md-input-container>
        </div>

        <div style="text-align: right; padding-right: 20px;">
            <div class="msjRep">{{mensajeReporte}}</div>
            <button [ngClass]="'btnUni'" md-raised-button (click)="consultaReporte()">Buscar</button>
        </div>
    </div>
    <div *ngIf="mostrarMensajeGuia" class="msjRepo">
        Para realizar un reporte, da click sobre el ícono
        <img src="../../../../assets/img/admin/busq.png" alt=""> para aplicar los filtros necesarios
    </div>
    <br>
    <div *ngIf="mostrarResultado" class="contTablaEnt">

        <table class="tablaEnt">
            <tr>
                <th>Solicitud</th>
                <th>Empleado</th>
                <th>Nombre</th>
                <th>Estatus</th>
                <th>Función</th>
                <th>Fecha</th>
                <th>Remisión</th>
            </tr>
            <tr *ngFor="let pedido of reporte">
                <td>{{pedido.solicitud}}</td>
                <td>{{pedido.empleado}}</td>
                <td>{{pedido.nombre}}</td>
                <td>{{pedido.estatus}}</td>
                <td>{{pedido.funcion}}</td>
                <td>{{pedido.fecha}}</td>
                <td>{{pedido.remision}}</td>
            </tr>
            <tr *ngIf="!reporte || reporte.length == 0">
                <td colspan="6"> La consulta no generó resultados, verifique e intente de nuevo </td>
            </tr>
        </table>
        <br>
        <div style="text-align: center;">
            <button [ngClass]="'btnUni'" md-raised-button (click)="exportar()"><img src="../../../../assets/img/admin/excel.png" /> Exportar a Excel</button>
        </div>
    </div>
</div>